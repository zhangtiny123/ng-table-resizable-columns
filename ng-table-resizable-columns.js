/*! ngTableColumnResizable v0.1.0 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-table-resizable-columns - New BSD License */

angular.module("ngTableResizableColumns",[]).directive("ngTableResizableColumns",["$timeout",function(a){function b(a){var b=function(a,b){return function(){return a.apply(b,arguments)}};this.pointerdown=b(this.pointerdown,this);var c=this;this.options={store:window.store,rigidSizing:!1,resizeFromBody:!0},this.$table=a,this.setHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),$(window).on("resize.rc",function(){return c.syncHandleWidths()})}var c=function(a){return parseFloat(a.style.width.replace("px",""))},d=function(a,b){return a.style.width=""+b+"px"},e=function(a){return 0===a.type.indexOf("touch")?(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]).pageX:a.pageX};return b.prototype.getColumnId=function(a){return this.$table.data("resizable-columns-id")+"-"+a.data("resizable-column-id")},b.prototype.setHeaders=function(){return this.$tableHeaders=this.$table.find("thead tr:first th:visible"),this.assignInitWidths(),this.createHandles()},b.prototype.destroy=function(){return this.$handleContainer.remove(),this.$table.removeData("resizableColumns"),$(window).off(".rc")},b.prototype.assignInitWidths=function(){return this.$tableHeaders.each(function(a,b){var c;c=$(b),c[0].style.width?c[0].style.width=c[0].offsetWidth+"px":0==a?c[0].style.width="50px":c[0].style.width="180px"})},b.prototype.createHandles=function(){var a,b=this;return null!=(a=this.$handleContainer)&&a.remove(),this.$table.before(this.$handleContainer=$("<div class='rc-handle-container' />")),this.$tableHeaders.each(function(a,c){var d;if(0!==b.$tableHeaders.eq(a+1).length&&null==b.$tableHeaders.eq(a).attr("data-noresize")&&null==b.$tableHeaders.eq(a+1).attr("data-noresize"))return d=$("<div class='rc-handle' />"),d.data("th",$(c)),d.appendTo(b.$handleContainer)}),this.$handleContainer.on("mousedown touchstart",".rc-handle",this.pointerdown)},b.prototype.syncHandleWidths=function(){var a=this;return this.setHeaders(),this.$handleContainer.width(this.$table.width()).find(".rc-handle").each(function(b,c){var d;return d=$(c),d.css({left:d.data("th").outerWidth()+(d.data("th").offset().left-a.$handleContainer.offset().left),height:a.options.resizeFromBody?a.$table.height():a.$table.find("thead").height()})})},b.prototype.saveColumnWidths=function(){var a=this;return this.$tableHeaders.each(function(b,d){var e;return e=$(d),null==e.attr("data-noresize")&&null!=a.options.store?a.options.store.set(a.getColumnId(e),c(e[0])):void 0})},b.prototype.restoreColumnWidths=function(){var a=this;return this.$tableHeaders.each(function(b,c){var e,f;return e=$(c),null!=a.options.store&&(f=a.options.store.get(a.getColumnId(e)))?d(e[0],f):void 0})},b.prototype.pointerdown=function(a){var b,f,g,h,i=this;return a.preventDefault(),g=e(a),b=$(a.currentTarget),f=b.data("th"),h=c(f[0]),this.$table.addClass("rc-table-resizing"),$(document).on("mousemove.rc touchmove.rc",function(a){var b=e(a)-g;return d(f[0],h+b)}),$(document).one("mouseup touchend",function(){return $(document).off("mousemove.rc touchmove.rc"),i.$table.removeClass("rc-table-resizing"),i.syncHandleWidths(),i.saveColumnWidths()})},{restrict:"EA",priority:999,require:"ngTable",link:function(c,d){var e;c.$watch("$data",function(){e.destroy(),e=new b(d)}),c.$watch("columns",function(){a(function(){e.destroy(),e=new b(d)},100)},!0),e=new b(d)}}}]);
//# sourceMappingURL=ng-table-resizable-columns.map